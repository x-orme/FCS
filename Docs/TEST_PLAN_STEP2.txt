[Step 2 리팩토링 검증 계획]
작성일: 2026-01-13
작성자: Antigravity

================================================================================
1. 개요
================================================================================
Step 2(비즈니스 로직 캡슐화 & Main 루프 다이어트) 작업이 완료되었습니다.
PC 환경에 컴파일러가 없어 직접 실행 검증은 불가능하므로, 코드 정적 분석(Static Analysis)을 완료하였습니다.
실제 하드웨어(STM32)에 펌웨어를 올린 뒤, 다음 항목들을 순서대로 체크하여 기능 회귀(Regression)가 없는지 확인해주시기 바랍니다.

================================================================================
2. 테스트 체크리스트
================================================================================

[Test 1] 빌드 및 부팅 (Build & Boot)
- [ ] STM32CubeIDE에서 'Build Project' 시 에러(Error)와 경고(Warning)가 없는가?
  - 예상: input.c, fcs_core.c 등 새로 작성된 모듈들이 정상 링크되어야 함.
- [ ] 다운로드 후 OLED 화면에 "BOOTING..." -> "BATTERY POS" 화면이 뜨는가?

[Test 2] 입력 장치 반응성 (Input response)
- [ ] [좌우 버튼] 커서가 이동하는가? 
  - 검증: ui.c가 sys->input.key_state를 제대로 참조하고 있음.
- [ ] [노브 1/2/3] 값을 돌렸을 때 해당 숫자가 변경되는가?
  - 검증: fcs_core.c의 FCS_Update_Input()에서 ADC 값을 변환하여 sys->input.knob_values에 저장하는 로직 동작 확인.

[Test 3] 센서 데이터 (Sensor Integration)
- [ ] 초기 설정 후 'Standby' 화면에서 온도(T)와 기압(P) 수치가 실시간으로 변동하는가?
  - 손가락을 센서에 대서 온도가 오르는지 확인.
  - 검증: FCS_Update_Sensors() 함수가 메인 루프에서 정상 호출되고 있음.

[Test 4] 시리얼 통신 (Serial Command)
- [ ] PC 터미널(TeraTerm 등) 연결 후, 아무 키나 눌렀을 때 에코백(Echo-back)이 되는가?
  - 검증: 링 버퍼(Ring Buffer) 및 인터럽트 체인이 끊기지 않고 동작하는지 확인.
- [ ] 명령어 테스트:
  Input: `TGT:52,S,333712,4132894,100` (엔터)
  Output: `OK:AZ...` 응답이 오고, OLED 화면이 [FIRE ORDER]로 즉시 전환되는가?
  - 검증: FCS_Task_Serial()이 파싱 후 sys->state를 UI_FIRE_DATA로 변경하는지 확인.

================================================================================
3. 트러블슈팅 가이드
================================================================================
- 만약 입력이 먹통이라면?
  -> main.c의 `FCS_Update_Input` 호출 순서 확인.
  -> `Input_Read_All` 안에서 HAL_ADC_PollForConversion 타임아웃 발생 여부 디버깅.
  
- 만약 시리얼 응답이 없다면?
  -> `FCS_Serial_Start`가 main() 초기화 단계에서 호출되었는지 확인.
  -> 인터럽트(ISR)가 발생하고 있는지 중단점(Breakpoint) 설정.
